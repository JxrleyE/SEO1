<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Schedule</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="schedule-container">
        <h2> Washer {{ washer_id }} Schedule </h2>
        <p>Available times:</p>

        <div class="schedule-table-wrapper">
            <table>
            {% for i in range(12) %}
            <tr>
                <td>
                    {% if i < early_morning|length %}
                    {% set slot = early_morning[i] %}
                    <form action="{{ url_for('laundry.book_washer', washer_id=washer_id) }}" method="POST">
                        <input type="hidden" name="time_slot" value="{{ slot.db_value }}">
                        <input type="hidden" name="time_slot_display" value="{{ slot.display_value }}">
                        <button type="submit" class="schedule-button{% if not slot.available %}disabled{% endif %}" {% if not slot.available %}disabled{% endif %}>
                            {% if slot.available %}
                                Book {{ slot.display_value }}
                            {% else %}
                                (Booked)
                            {% endif %}
                        </button>
                    </form>
                    {% endif %}
                </td>

                <td>
                    {% if i < morning|length %}
                    {% set slot = morning[i] %}
                    <form action="{{ url_for('laundry.book_washer', washer_id=washer_id) }}" method="POST">
                        <input type="hidden" name="time_slot" value="{{ slot.db_value }}">
                        <input type="hidden" name="time_slot_display" value="{{ slot.display_value }}">
                        <button type="submit" class="schedule-button{% if not slot.available %}disabled{% endif %}" {% if not slot.available %}disabled{% endif %}>
                            {% if slot.available %}
                                Book {{ slot.display_value }}
                            {% else %}
                                (Booked)
                            {% endif %}
                        </button>
                    </form>
                    {% endif %}
                </td>

                <td>
                    {% if i < afternoon|length %}
                    {% set slot = afternoon[i] %}
                    <form action="{{ url_for('laundry.book_washer', washer_id=washer_id) }}" method="POST">
                        <input type="hidden" name="time_slot" value="{{ slot.db_value }}">
                        <input type="hidden" name="time_slot_display" value="{{ slot.display_value }}">
                        <button type="submit" class="schedule-button{% if not slot.available %}disabled{% endif %}" {% if not slot.available %}disabled{% endif %}>
                            {% if slot.available %}
                                Book {{ slot.display_value }}
                            {% else %}
                                (Booked)
                            {% endif %}
                        </button>
                    </form>
                    {% endif %}
                </td>

                <td>
                    {% if i < evening|length %}
                    {% set slot = evening[i] %}
                    <form action="{{ url_for('laundry.book_washer', washer_id=washer_id) }}" method="POST">
                        <input type="hidden" name="time_slot" value="{{ slot.db_value }}">
                        <input type="hidden" name="time_slot_display" value="{{ slot.display_value }}">
                        <button type="submit" class="schedule-button{% if not slot.available %}disabled{% endif %}" {% if not slot.available %}disabled{% endif %}>
                            {% if slot.available %}
                                Book {{ slot.display_value }}
                            {% else %}
                                (Booked)
                            {% endif %}
                        </button>
                    </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
            </table>
        </div>

        <div class="dashboard-links">
             <a href="{{ url_for('laundry.laundry_list') }}" class="glass-button-link">Back to Laundry</a>
             <a href="{{ url_for('home.logout') }}" class="glass-button-link">Logout</a>
        </div>

    </div>

  </body>
</html>